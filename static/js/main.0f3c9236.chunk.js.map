{"version":3,"sources":["components/Legend.js","components/Sidebar.js","components/MapView.js","components/Timebar.js","components/Table.js","components/Draft.js","components/StaticFilterOptions.js","components/Mapfilter.js","App.js","index.js"],"names":["Legend","colors","React","createElement","className","map","layer","i","key","style","backgroundColor","formatNumber","number","toLocaleString","maximumFractionDigits","calculatePercentage","value","total","toFixed","Sidebar","_ref","countryData","level1Data","level2Data","regionInfo","selectedYear","selectedMonth","appendedData","setAppendedData","useState","useEffect","mergedData","features","clickedKey","foundRow","find","feature","properties","Key","Name","Population","concat","Phase1","Percent1","parseFloat","Phase2","Percent2","Phase3","Percent3","Phase4","Percent4","Phase5","Percent5","src","alt","mapboxgl","accessToken","MapView","onChangeRegion","mapContainer","useRef","lng","setLng","lat","setLat","zoom","setZoom","hoveredRegion","setHoveredRegion","handleMove","current","getCenter","getZoom","layerNames","createLayerClickHandler","e","console","log","lngLat","newHoveredRegion","name","popup","remove","Popup","maxWidth","maxHeight","setLngLat","setHTML","Name_2","addTo","isMounted","forEach","layerName","getLayer","setPaintProperty","yearValue","parseInt","monthValue","getMapboxExpression","Map","container","center","on","ref","Timebar","onChangeYear","onChangeMonth","setSelectedYear","setSelectedMonth","handleMonthButtonClick","month","monthNumber","March","June","November","undefined","type","min","max","step","onChange","event","sliderValue","target","selected","Math","round","maxYear","onClick","Table","calculateColumnSum","columnName","rowData","reduce","row","replace","Draft","columnDefs","setColumnDefs","field","rowgroup","hide","headerClass","width","populationData","Country","L1","L2","totalRow","rowClass","allRows","AgGridReact","groupDisplayType","StaticFilterOptions","title","options","selectedOptions","setSelectedOptions","showDropdown","setShowDropdown","searchText","setSearchText","dropdownRef","handleDocumentClick","contains","document","addEventListener","removeEventListener","filteredOptions","filter","option","toLowerCase","includes","placeholder","id","checked","length","handleSelectAll","htmlFor","selectedOption","handleOptionToggle","Mapfilter","handleFilteredDataChange","filterCountry","setFilterCountry","level1Filter","setLevel1Filter","level2Filter","setLevel2Filter","countryOptions","setCountryOptions","level1Options","setLevel1Options","level2Options","setLevel2Options","outputCountryData","setOutputCountryData","outputLevel1Data","setOutputLevel1Data","outputLevel2Data","setOutputLevel2Data","axios","get","then","response","data","countries","catch","error","level1Names","Name_1","level2Names","availableLevel1Options","availableLevel2Options","filteredCountryFeatures","filteredLevel1Features","filteredLevel2Features","push","geometry","filteredData","filteredCountryData","filteredLevel1Data","filteredLevel2Data","App","setCountryData","setLevel1Data","setLevel2Data","setFilteredData","handleYearChange","year","handleMonthChange","async","responseCountry","responseLevel1","responseLevel2","fetchData","region","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0f3c9236.chunk.js","sourcesContent":["import React from 'react';\nimport './Legend.css';\n\nfunction Legend() {\n    const layers = ['Phase 1', 'Phase 2', 'Phase 3', 'Phase 4', 'Phase 5', 'No data'];\n    const colors = ['#53ca57', '#ffe252', '#fa890f', '#eb3333', '#900101e3','#ffffff'];\n\n    return (\n        <nav className='legend'>\n            <div className='legend-container'>\n                {layers.map((layer, i) => (\n                    <div key={i} className='legend-item'>\n                        <span className='legend-key' style={{ backgroundColor: colors[i] }} />\n                        <span className='legend-value'>{layer}</span>\n                    </div>\n                ))}\n            </div>\n        </nav>\n    );\n}\n\nexport default Legend;\n","import React, { useEffect, useState } from 'react';\nimport './Sidebar.css';\nimport App from '../App';\n\nfunction Sidebar({ countryData, level1Data, level2Data, regionInfo, selectedYear, selectedMonth }) { //REGIONINFO TRAE EL KEY\n  const [appendedData, setAppendedData] = useState([]);\n  \n\n  useEffect(() => {\n    if (countryData && level1Data && level2Data){\n        const mergedData = [ ...countryData.features, ...level1Data.features, ...level2Data.features ];\n        setAppendedData(mergedData);\n    };\n    \n  }, [regionInfo]);\n\n\n  if (!regionInfo) {\n    return null;\n  }\n\n  const clickedKey = regionInfo.key;\n\n  \n  let foundRow = null;\n  if (appendedData) {\n    foundRow = appendedData.find((feature) => feature.properties.Key === clickedKey);\n\n  }\n\n  const properties = foundRow ? foundRow.properties : {};\n\n  const Name= properties['Name_2'];\n  const Population = formatNumber(properties[`POP-${selectedYear}-0${selectedMonth}`]);\n  const Phase1 = formatNumber(properties[`PH1-${selectedYear}-0${selectedMonth}`]);\n  const Percent1 = calculatePercentage(\n    parseFloat(properties[`PH1-${selectedYear}-0${selectedMonth}`]),\n    parseFloat(properties[`POP-${selectedYear}-0${selectedMonth}`])\n  );\n\n  const Phase2 = formatNumber(properties[`PH2-${selectedYear}-0${selectedMonth}`]);\n  const Percent2 = calculatePercentage(\n    parseFloat(properties[`PH2-${selectedYear}-0${selectedMonth}`]),\n    parseFloat(properties[`POP-${selectedYear}-0${selectedMonth}`])\n  );\n  const Phase3 = formatNumber(properties[`PH3-${selectedYear}-0${selectedMonth}`]);\n  const Percent3 = calculatePercentage(\n    parseFloat(properties[`PH3-${selectedYear}-0${selectedMonth}`]),\n    parseFloat(properties[`POP-${selectedYear}-0${selectedMonth}`])\n  );\n  const Phase4 = formatNumber(properties[`PH4-${selectedYear}-0${selectedMonth}`]);\n  const Percent4 = calculatePercentage(\n    parseFloat(properties[`PH4-${selectedYear}-0${selectedMonth}`]),\n    parseFloat(properties[`POP-${selectedYear}-0${selectedMonth}`])\n  );\n  const Phase5 = formatNumber(properties[`PH5-${selectedYear}-0${selectedMonth}`]);\n  const Percent5 = calculatePercentage(\n    parseFloat(properties[`PH5-${selectedYear}-0${selectedMonth}`]),\n    parseFloat(properties[`POP-${selectedYear}-0${selectedMonth}`])\n  );\n\n  return (\n    <nav className='sidebar'>\n      <div className='sidebar-container'>\n        <div className='logo'>\n          <img src='/images/family_icon.jpg' alt='Family Icon' />\n          <span className='logo-text'>Food and nutrition situation {selectedYear} </span> {/* adding selected month as trial*/}\n        </div>\n\n        <div className='region-info'>\n          {/* Display information about the hovered region */}\n          <h2>\n            <div>\n              <p>\n              {Name}\n              </p>\n            </div>\n          </h2>\n\n          <div className='info-row'>\n            <h4>Total population:</h4>\n            <p>{Population}</p>\n          </div>\n\n          <div className='info-row'>\n            <h4>Phase 1:</h4>\n            <p>{Phase1}</p>\n            <p>{Percent1}%</p>\n          </div>\n          <div className='info-row'>\n            <h4>Phase 2:</h4>\n            <p>{Phase2}</p>\n            <p>{Percent2}%</p>\n          </div>\n          <div className='info-row'>\n            <h4>Phase 3:</h4>\n            <p>{Phase3}</p>\n            <p>{Percent3}%</p>\n          </div>\n          <div className='info-row'>\n            <h4>Phase 4:</h4>\n            <p>{Phase4}</p>\n            <p>{Percent4}%</p>\n          </div>\n          <div className='info-row'>\n            <h4>Phase 5:</h4>\n            <p>{Phase5}</p>\n            <p>{Percent5}%</p>\n          </div>\n          {/* Add more fields as needed */}\n        </div>\n        {/* More sidebar content */}\n      </div>\n    </nav>\n  );\n}\n\nfunction formatNumber(number) {\n  return number ? number.toLocaleString('en-US', { maximumFractionDigits: 0 }) : '';\n}\n\nfunction calculatePercentage(value, total) {\n  const percentage = total ? ((value || 0) / total) * 100 : 0;\n  return percentage.toFixed(2); // Displaying percentage with two decimal places\n}\n\nexport default Sidebar;\n","\nimport React, { useRef, useEffect, useState } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport Legend from './Legend';\nimport App from '../App';\nimport './MapView.css';\nimport Sidebar from './Sidebar';\nimport { selected } from '@syncfusion/ej2-react-pivotview';\n\nmapboxgl.accessToken = 'pk.eyJ1IjoibWFyaWFuYWp2LSIsImEiOiJjbGs3eXJmbzEwYXR3M2RxbnRuOHVkaHV3In0.rVa0wb_O5OTeuk07J90w5A';\n\nfunction MapView({selectedYear, selectedMonth, onChangeRegion}) {\n  const mapContainer = useRef(null);\n  const map = useRef(null);\n  const [lng, setLng] = useState(0);\n  const [lat, setLat] = useState(17);\n  const [zoom, setZoom] = useState(3.4);\n  const [hoveredRegion, setHoveredRegion] = useState(null);\n\n  const initializeMap = () => {\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/marianajv-/cllf4b5be012q01pb6nqq4k5x',\n      center: [lng, lat],\n      zoom: zoom\n    });\n    map.current.on('move', handleMove);\n    layerNames.forEach(layerName => {\n      map.current.on('click', layerName, createLayerClickHandler);\n    }); \n\n\n  };\n\n  const handleMove = () => {\n    setLng(map.current.getCenter().lng.toFixed(4));\n    setLat(map.current.getCenter().lat.toFixed(4));\n    setZoom(map.current.getZoom().toFixed(2));\n  };\n\n  const layerNames = ['output_country-2uwmmy', 'output_level1-5iewsu', 'output_level2-8nur76'];\n\n  const createLayerClickHandler = (e) => {// CLICKHANDLER si lo dejamos en key ya no tiene que depender de year, solo de la posicion \n    console.log('clickhandler ran', e.features)\n      \n    const feature = e.features[0];\n    const lngLat = e.lngLat;\n\n    const newHoveredRegion = {\n      name: feature.properties['Name_2'],\n      key: feature.properties['Key'] \n    };\n\n    let popup = null;\n\n    if (popup) {\n      popup.remove();\n    }\n\n    popup = new mapboxgl.Popup({\n      maxWidth: '100px',\n      maxHeight: '50px',\n      className: 'custom-popup'\n    })\n    .setLngLat(lngLat)\n    .setHTML(`<h5>${feature.properties.Name_2}</h5>`)\n  .addTo(map.current);\n\n    onChangeRegion(newHoveredRegion);\n  };//CLICKHANDLER\n  \n// separating useffects\n\nuseEffect(() => {\n  let isMounted = true;\n\n  if (!map.current) {\n    initializeMap();\n  } else {\n\n    layerNames.forEach(layerName => {\n      const existingLayer = map.current.getLayer(layerName);\n      if (existingLayer) {\n        map.current.setPaintProperty(\n          layerName,\n          'fill-color',\n          getMapboxExpression(selectedYear, selectedMonth)\n        );\n      }\n    });\n  }\n\n  return () => {\n    isMounted = false;\n  };\n}, [selectedYear, selectedMonth]);\n\nuseEffect(() => {\n  let isMounted = true;\n\n  if (map.current) {\n    map.current.on('move', handleMove);\n    \n  }\n\n  return () => {\n    isMounted = false;\n  };\n}, [lat, lng, zoom]);\n\n\n  \n    return (\n      <div className='view-container'>\n        \n        <div ref={mapContainer} className=\"map-container\" />\n\n        <Legend/>\n      </div>\n      \n    );\n  }\n\n  function getMapboxExpression(selectedYear, selectedMonth) {\n    const yearValue = parseInt(selectedYear);\n    const monthValue = parseInt(selectedMonth);\n    \n    return [\n      'case',\n      ['==', ['number', ['get', `CLAS-${yearValue}-0${monthValue}`]], 1], '#53ca57',\n      ['==', ['number', ['get', `CLAS-${yearValue}-0${monthValue}`]], 2], '#ffe252',\n      ['==', ['number', ['get', `CLAS-${yearValue}-0${monthValue}`]], 3], '#fa890f',\n      ['==', ['number', ['get', `CLAS-${yearValue}-0${monthValue}`]], 4], '#eb3333',\n      '#ffffff'\n    ];\n  }\n\n\nexport default MapView;\n","\nimport React, { useState } from 'react';\nimport './Timebar.css';\nimport MapView from './MapView';\n\n\nconst Timebar = ({ onChangeYear, onChangeMonth }) => {\n  const minYear = 2014;\n  const maxYear = 2023;\n  const [selectedYear, setSelectedYear] = useState(maxYear);\n  const [selectedMonth, setSelectedMonth] = useState(null);\n\n  const handleSliderChange = (event) => {\n    const yearRange = maxYear - minYear;\n    const sliderValue = parseFloat(event.target.value);\n    const selected = Math.round(minYear + sliderValue * yearRange);\n    setSelectedYear(selected);\n    if (onChangeYear) {\n      onChangeYear(selected);\n    }\n  };\n\n  const handleMonthButtonClick = (month) => {\n    const monthMap = {\n      March: 3,\n      June: 6,\n      November: 11,\n    };\n\n    const monthNumber = monthMap[month];\n    if (monthNumber !== undefined) {\n      setSelectedMonth(monthNumber);\n      if (onChangeMonth) {\n        onChangeMonth(monthNumber);\n      }\n    }\n  };\n\n  return (\n    \n    \n    <div className=\"timebar\">\n      <div className=\"year-bar\">\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"1\"\n          step=\"0.01\"\n          value={(selectedYear - minYear) / (maxYear - minYear)}\n          onChange={handleSliderChange}\n          className=\"slider\"\n        />\n        <div className=\"year-indicator\">{selectedYear}</div>\n      </div>\n      <div className=\"month-buttons\">\n        <button\n          className={selectedMonth === 3 ? 'selected' : ''}\n          onClick={() => handleMonthButtonClick('March')}\n        >\n          March\n        </button>\n        <button\n          className={selectedMonth === 6 ? 'selected' : ''}\n          onClick={() => handleMonthButtonClick('June')}\n        >\n          June\n        </button>\n        <button\n          className={selectedMonth === 11 ? 'selected' : ''}\n          onClick={() => handleMonthButtonClick('November')}\n        >\n          November\n        </button>\n      </div>\n\n    </div>\n  );\n};\n\nexport default Timebar;\n","import React, { useState } from 'react';\nimport _ from 'lodash';\nimport './Table.css'; \nimport Timebar from './Timebar';\nimport App from '../App';\n\nfunction Table({ countryData, level1Data, level2Data, selectedYear }) {\n \n\n    const renderColumns = () => {\n        const columns = [];\n      \n        if (level2Data && level2Data.features && level2Data.features.length > 0) {\n          const properties = level2Data.features[0].properties;\n          const columnNames=['Population', 'Phase 1','Phase 2','Phase 3','Phase 4','Phase 5','Phase 3-5'];      \n          const columnColors = ['grey-bg', 'green-bg', 'yellow-bg', 'orange-bg', 'red-bg', 'dark-red-bg', 'dark-red-bg'];      \n \n\n          Object.keys(properties).forEach((key, index) => {\n            \n            if (key.includes(`-${selectedYear}-03`)) {\n              if (key.includes('CLAS')|| key.includes('PROT')) { \n                return; // Skip unwanted columns\n              }\n      \n              const adjustedKey = key.replace(`-${selectedYear}-03`, ''); // Remove '-2023-03' from the key\n              const columnClass = columnColors[1];\n\n              \n              columns.push({ key: adjustedKey, class: columnClass });\n            }\n          });\n      \n          // Push the last column with the dark red class\n          columns.unshift({ key: 'L2', class: 'green-bg' });\n          columns.unshift({ key: 'L1', class: 'green-bg' });\n          columns.push({ key: '%', class: 'green-bg' });\n        }\n      \n        return columns.map((column, index) => (\n          <th key={index} className={column.class}>\n            {column.key}\n          </th>\n        ));\n      };\n  \n      const renderCountryRows = () => {\n        if (countryData && countryData.features && countryData.features.length > 0) {\n          return countryData.features.map((feature, index) => { \n            const properties = feature.properties;// hasta aqui todo igual\n         \n    \n            return (\n                <tr key={index}>\n                  <td>{properties.Country}</td>\n                  <td></td>\n              <td></td>\n  \n    \n    \n                  {Object.entries(properties).map(([key, value]) => {\n                    if (key.includes(`-${selectedYear}-03`)) {\n                      if (key.includes('CLAS')|| key.includes('PROT')) {\n                        return null;\n                      }\n                      return <td key={key}>{formatNumber(value)}</td>;\n                    }\n                    return null;\n                  })}\n               <td>\n    \n                </td>\n              </tr>\n            );\n          });\n        }\n        return null;\n      };    \n\n\n      const renderLevel1Rows = () => {\n        if (level1Data && level1Data.features && level1Data.features.length > 0) {\n          return level1Data.features.map((feature, index) => { \n            const properties = feature.properties;// hasta aqui todo igual\n         \n    \n            return (\n                <tr key={index}>\n                  <td>{properties.Country}</td>\n                  <td>{properties.Name_1}</td>\n              <td></td>\n  \n    \n    \n                  {Object.entries(properties).map(([key, value]) => {\n                    if (key.includes(`-${selectedYear}-03`)) {\n                      if (key.includes('CLAS')|| key.includes('PROT')) {\n                        return null;\n                      }\n                      return <td key={key}>{formatNumber(value)}</td>;\n                    }\n                    return null;\n                  })}\n               <td>\n    \n                </td>\n              </tr>\n            );\n          });\n        }\n        return null;\n      };    \n\n\n\n\n\n\n  const renderRows = () => {\n    if (level2Data && level2Data.features && level2Data.features.length > 0) {\n      return level2Data.features.map((feature, index) => { \n        const properties = feature.properties;// hasta aqui todo igual\n     \n\n        return (\n            <tr key={index}>\n              <td>{properties.Country}</td>\n              <td>{properties.Name_1}</td>\n              <td>{properties.Name_2}</td>\n\n\n\n              {Object.entries(properties).map(([key, value]) => {\n                if (key.includes(`-${selectedYear}-03`)) {\n                  if (key.includes('CLAS')|| key.includes('PROT')) {\n                    return null;\n                  }\n                  return <td key={key}>{formatNumber(value)}</td>;\n                }\n                return null;\n              })}\n           <td>\n\n            </td>\n          </tr>\n        );\n      });\n    }\n    return null;\n  };\n\n\n\n  return (\n    <div className=\"table-container\">\n      <div className=\"table-wrapper\">\n        <table>\n          <thead>\n            <tr>\n              <th className=\"green-bg\"></th>\n              {renderColumns()}\n            </tr>\n          </thead>\n          <tbody>\n            {renderCountryRows()}\n          </tbody>\n        </table>\n      </div>\n  \n      <div className=\"table-spacing\" /> {/* Add some spacing */}\n      \n      <div className=\"table-wrapper\">\n        <table>\n          <thead>\n            <tr>\n              <th className=\"green-bg\"></th>\n              {renderColumns()}\n            </tr>\n          </thead>\n          <tbody>\n            {renderLevel1Rows()}\n          </tbody>\n        </table>\n      </div>\n      <div className=\"table-spacing\" /> {/* Add some spacing */}\n      <div className=\"table-wrapper\">\n        <table>\n          <thead>\n            <tr>\n              <th className=\"green-bg\"></th>\n              {renderColumns()}\n            </tr>\n          </thead>\n          <tbody>\n            {renderRows()}\n          </tbody>\n        </table>\n      </div>\n    </div>\n\n    \n\n    \n  );\n  \n}\n\n\nfunction formatNumber(number) {\n  if (number === null) {\n      return '0'; // Return '0' as a string or 0 if you prefer a number\n  }\n  \n  return number.toLocaleString('en-US', { maximumFractionDigits: 0 });\n}\n\n\nfunction calculatePercentage(value, total) {\n    const percentage = (value / total) * 100;\n    return percentage.toFixed(2); // Displaying percentage with two decimal places\n}\n\n\n\nexport default Table;\n","import React, { useState } from 'react';\nimport { AgGridReact } from 'ag-grid-react';\nimport App from '../App';\nimport Timebar from './Timebar';\nimport 'ag-grid-community/styles/ag-grid.css';\nimport 'ag-grid-community/styles/ag-theme-alpine.css';\nimport './DraftRow.css';\n\nconst Draft = ({ countryData, selectedYear, selectedMonth}) => {\n // console.log(selectedMonth);\n  \n  const [columnDefs, setColumnDefs] = useState([\n    { field: 'Country', rowgroup: true, hide: false, headerClass: 'custom-header', width: 100  },\n    { field: 'L1', headerClass: 'custom-header',width: 100  },\n    { field: 'L2', headerClass: 'custom-header',width: 100  },\n    { field: 'Population', headerClass: 'custom-header',width: 120  },\n    { field: 'Phase 1', headerClass: 'custom-header1',width: 90 },\n    { field: 'Phase 2', headerClass: 'custom-header2',width: 90  },\n    { field: 'Phase 3', headerClass: 'custom-header3',width: 90  },\n    { field: 'Phase 4', headerClass: 'custom-header4',width: 90  },\n    { field: 'Phase 5', headerClass: 'custom-header5',width: 90  },\n    { field: 'Phase 3-5', headerClass: 'custom-header5',width: 100  },\n    { field: '%', headerClass: 'custom-header5',width: 60  }\n  ]);\n  \n    if (!countryData) {\n      return null; // Render nothing while data is being fetched\n    }\n\n    const rowData = countryData.features.map((feature) => {\n      const populationData = feature.properties[`POP-${selectedYear}-0${selectedMonth}`];\n  \n      if (populationData === undefined) {\n        // Data is not available for this combination, return a message\n        return {\n          Country: feature.properties['Country'],\n          L1: '',\n          L2: '',\n          Population: 'Data not available',\n          'Phase 1': 'Data not available',\n          'Phase 2': 'Data not available',\n          'Phase 3': 'Data not available',\n          'Phase 4': 'Data not available',\n          'Phase 5': 'Data not available',\n          'Phase 3-5': 'Data not available',\n          '%': 'Data not available',\n        };\n      }\n  \n      // Data is available, format it\n      return {\n        Country: feature.properties['Country'],\n        L1: feature.properties[''],\n        L2: feature.properties[''],\n        Population: formatNumber(populationData),\n        'Phase 1': formatNumber(feature.properties[`PH1-${selectedYear}-0${selectedMonth}`]),\n        'Phase 2': formatNumber(feature.properties[`PH2-${selectedYear}-0${selectedMonth}`]),\n        'Phase 3': formatNumber(feature.properties[`PH3-${selectedYear}-0${selectedMonth}`]),\n        'Phase 4': formatNumber(feature.properties[`PH4-${selectedYear}-0${selectedMonth}`]),\n        'Phase 5': formatNumber(feature.properties[`PH5-${selectedYear}-0${selectedMonth}`]),\n        'Phase 3-5': formatNumber(feature.properties[`PH3:5-${selectedYear}-0${selectedMonth}`]),\n        '%': calculatePercentage(\n          feature.properties[`PH3:5-${selectedYear}-0${selectedMonth}`],\n          populationData\n        ),\n      };\n    });\n\n    const totalRow = {\n      Country: 'Total', \n      L1: '', \n      L2: '',\n      Population: formatNumber(calculateColumnSum('Population', rowData)),\n      'Phase 1': formatNumber(calculateColumnSum('Phase 1', rowData)),\n      'Phase 2': formatNumber(calculateColumnSum('Phase 2', rowData)),\n      'Phase 3': formatNumber(calculateColumnSum('Phase 3', rowData)),\n      'Phase 4': formatNumber(calculateColumnSum('Phase 4', rowData)),\n      'Phase 5': formatNumber(calculateColumnSum('Phase 5', rowData)),\n      'Phase 3-5': formatNumber(calculateColumnSum('Phase 3-5', rowData)),\n      '%': calculatePercentage(\n        calculateColumnSum('Phase 3-5', rowData),\n        calculateColumnSum('Population', rowData)\n      ),\n      \n      rowClass: 'total-row',\n    };\n    \n    \n    const allRows = [...rowData, totalRow];\n\n    \n\n\n    const groupDisplayType = 'groupRows';\n  \n    return (\n      <div className=\"ag-theme-alpine\" >\n        <AgGridReact rowData={allRows} groupDisplayType={groupDisplayType} columnDefs={columnDefs} />\n\n      </div>\n    );\n  };\n\n  function formatNumber(number) {\n    if (number === null) {\n        return '0'; // Return '0' as a string or 0 if you prefer a number\n    }\n    \n    return number.toLocaleString('en-US', { maximumFractionDigits: 0 });\n  }\n  \n  function calculatePercentage(value, total) {\n    const percentage = (value / total) * 100;\n    return percentage.toFixed(2); // Displaying percentage with two decimal places\n}\n\nfunction calculateColumnSum(columnName, rowData) {\n  return rowData.reduce((total, row) => total + parseFloat(row[columnName].replace(/,/g, '')) || 0, 0);\n}\n  \n  export default Draft;","import React, { useState, useRef, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./StaticFilterOptions.css\";\n\nconst StaticFilterOptions = ({ title, options, selectedOptions, setSelectedOptions }) => {\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [searchText, setSearchText] = useState(\"\");\n\n  const dropdownRef = useRef(null);\n\n  const handleDocumentClick = (event) => {\n    if (!dropdownRef.current.contains(event.target)) {\n      setShowDropdown(false);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"click\", handleDocumentClick);\n    return () => {\n      document.removeEventListener(\"click\", handleDocumentClick);\n    };\n  }, []);\n\n  const handleSelectAll = () => {\n    if (selectedOptions.length === options.length) {\n      setSelectedOptions([]);\n    } else {\n      setSelectedOptions(options);\n    }\n  };\n\n  const handleOptionToggle = (option) => {\n    if (selectedOptions.includes(option)) {\n      setSelectedOptions(selectedOptions.filter((selectedOption) => selectedOption !== option));\n    } else {\n      setSelectedOptions([...selectedOptions, option]);\n    }\n  };\n\n  const handleSearchChange = (e) => {\n    setSearchText(e.target.value);\n  };\n\n  const filteredOptions = options\n    .filter(option => option != null)\n    .filter((option) => option.toLowerCase().includes(searchText.toLowerCase())\n  );\n\n  return (\n    <div className=\"filter-container\">\n      <label>{title}:</label>\n      <div className=\"search-dropdown\" ref={dropdownRef}>\n        <input\n          type=\"text\"\n          placeholder={`Search by ${title}`}\n          value={searchText}\n          onChange={handleSearchChange}\n          onClick={() => setShowDropdown(true)}\n        />\n        {showDropdown && (\n          <div className=\"checkbox-list\">\n            <div>\n              <input\n                type=\"checkbox\"\n                id={`selectAll${title}`}\n                value={`selectAll${title}`}\n                checked={selectedOptions.length === options.length}\n                onChange={handleSelectAll}\n              />\n              <label htmlFor={`selectAll${title}`}>Select All</label>\n            </div>\n            {filteredOptions.map((option) => (\n              <div key={option}>\n                <input\n                  type=\"checkbox\"\n                  id={option}\n                  value={option}\n                  checked={selectedOptions.includes(option)}\n                  onChange={() => handleOptionToggle(option)}\n                />\n                <label htmlFor={option}>\n                  <span>{option}</span>\n                </label>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nStaticFilterOptions.propTypes = {\n  title: PropTypes.string.isRequired,\n  options: PropTypes.arrayOf(PropTypes.string).isRequired,\n  selectedOptions: PropTypes.arrayOf(PropTypes.string).isRequired,\n  setSelectedOptions: PropTypes.func.isRequired,\n};\n\nexport default StaticFilterOptions;","import React, { useState, useEffect } from \"react\";\nimport StaticFilterOptions from \"./StaticFilterOptions\";\nimport axios from \"axios\";\nimport \"./Mapfilter.css\";\nimport { feature } from \"@turf/turf\";\nimport App from \"../App\";\n\nconst Mapfilter = ({ handleFilteredDataChange, countryData, level1Data, level2Data }) => {\n\n  const [filterCountry, setFilterCountry] = useState([]);\n  const [level1Filter, setLevel1Filter] = useState([]);\n  const [level2Filter, setLevel2Filter] = useState([]);\n\n  const [countryOptions, setCountryOptions] = useState([]);\n  const [level1Options, setLevel1Options] = useState([]);\n  const [level2Options, setLevel2Options] = useState([]);\n\n  const [outputCountryData, setOutputCountryData] = useState([]);\n  const [outputLevel1Data, setOutputLevel1Data] = useState([]);\n  const [outputLevel2Data, setOutputLevel2Data] = useState([]);\n\n  useEffect(() => {\n    axios\n      .get(\"./data/output_country.geojson\")\n      .then((response) => {\n        setOutputCountryData(response.data.features);\n        const countries = response.data.features.map(\n          (feature) => feature.properties.Country\n        );\n        setCountryOptions(countries); \n      })\n      .catch((error) => {\n        console.error(\"Error loading output_country.geojson:\", error);\n      });\n\n    axios\n      .get(\"./data/output_level1.geojson\")\n      .then((response) => {\n        setOutputLevel1Data(response.data.features);\n        const level1Names = response.data.features.map(\n          (feature) => feature.properties.Name_1\n        );\n        setLevel1Options(level1Names);\n      })\n      .catch((error) => {\n        console.error(\"Error loading output_level1.geojson:\", error);\n      });\n\n    axios\n      .get(\"./data/output_level2.geojson\")\n      .then((response) => {\n        setOutputLevel2Data(response.data.features);\n        const level2Names = response.data.features.map(\n          (feature) => feature.properties.Name_2\n        );\n        setLevel2Options(level2Names);\n      })\n      .catch((error) => {\n        console.error(\"Error loading output_level2.geojson:\", error);\n      });\n  }, []);\n\n  useEffect(() => {\n    // Update filterCountry and available level1Options when level1Filter changes\n    const availableLevel1Options = outputLevel1Data\n      .filter((feature) => filterCountry.includes(feature.properties.Country))\n      .map((feature) => feature.properties.Name_1);\n\n    setLevel1Options(availableLevel1Options);\n  }, [filterCountry, outputLevel1Data]);\n\n  useEffect(() => {\n    // Update filterCountry, level1Filter, and available level2Options when level2Filter changes\n    const availableLevel2Options = outputLevel2Data\n      .filter(\n        (feature) =>\n          filterCountry.includes(feature.properties.Country) &&\n          level1Filter.includes(feature.properties.Name_1)\n      )\n      .map((feature) => feature.properties.Name_2);\n\n    setLevel2Options(availableLevel2Options);\n  }, [filterCountry, level1Filter, outputLevel2Data]);\n\n  useEffect(() => {\n    console.log('Filtering data...');\n    const filteredCountryFeatures = [];\n    const filteredLevel1Features = [];\n    const filteredLevel2Features = [];\n  \n    if (filterCountry.length > 0 || level1Filter.length > 0 || level2Filter.length > 0) {\n      console.log('Applying filters...');\n      filteredCountryFeatures.push(\n        ...outputCountryData\n          .filter((feature) => {\n            if (\n              level1Filter.length === 0 &&\n              level2Filter.length === 0 &&\n              filterCountry.length === 0\n            ) {\n              return true;\n            }\n            return filterCountry.includes(feature.properties.Country);\n          })\n          .map((feature) => ({\n            type: 'Feature',\n            properties: feature.properties,\n            geometry: feature.geometry,\n          }))\n      );\n  \n      // Level 1 filter should not be affected by Level 2 filter.\n      filteredLevel1Features.push(\n        ...outputLevel1Data\n          .filter((feature) => {\n            console.log('Filtering level 1 data...');\n            return (\n              (level1Filter.length === 0 ||\n                level1Filter.includes(feature.properties.Name_1)) &&\n              (filterCountry.length === 0 ||\n                filterCountry.includes(feature.properties.Country))\n            );\n          })\n          .map((feature) => ({\n            type: 'Feature',\n            properties: feature.properties,\n            geometry: feature.geometry,\n          }))\n      );\n  \n      // Level 2 filter.\n      filteredLevel2Features.push(\n        ...outputLevel2Data\n          .filter((feature) => {\n            console.log('Filtering level 2 data...');\n            return (\n              (level1Filter.length === 0 ||\n                level1Filter.includes(feature.properties.Name_1)) &&\n              (level2Filter.length === 0 ||\n                level2Filter.includes(feature.properties.Name_2)) &&\n              (filterCountry.length === 0 ||\n                filterCountry.includes(feature.properties.Country))\n            );\n          })\n          .map((feature) => ({\n            type: 'Feature',\n            properties: feature.properties,\n            geometry: feature.geometry,\n          }))\n      );\n    } else {\n      // Handle the case when no filters are applied.\n      filteredCountryFeatures.push(\n        ...outputCountryData.map((feature) => ({\n          type: 'Feature',\n          properties: feature.properties,\n          geometry: feature.geometry,\n        }))\n      );\n      filteredLevel1Features.push(\n        ...outputLevel1Data.map((feature) => ({\n          type: 'Feature',\n          properties: feature.properties,\n          geometry: feature.geometry,\n        }))\n      );\n      filteredLevel2Features.push(\n        ...outputLevel2Data.map((feature) => ({\n          type: 'Feature',\n          properties: feature.properties,\n          geometry: feature.geometry,\n        }))\n      );\n    }\n  \n    const filteredData = {\n      filteredCountryData: {\n        type: 'FeatureCollection',\n        features: filteredCountryFeatures,\n      },\n      filteredLevel1Data: {\n        type: 'FeatureCollection',\n        features: filteredLevel1Features,\n      },\n      filteredLevel2Data: {\n        type: 'FeatureCollection',\n        features: filteredLevel2Features,\n      },\n    };\n  \n    console.log('Filtered Country data:', filteredData.filteredCountryData); // this has to be sent to App\n    console.log('Filtered Lv1 data:', filteredData.filteredLevel1Data);\n    console.log('Filtered Lv2 data:', filteredData.filteredLevel2Data);\n  \n    handleFilteredDataChange(filteredData);\n  }, [filterCountry, level1Filter, level2Filter, outputCountryData, outputLevel1Data, outputLevel2Data]);\n      \n  return (\n    <div>\n      <h1></h1>\n      <div className=\"filter-section\">\n        <StaticFilterOptions\n          title=\"Country\"\n          options={countryOptions}\n          selectedOptions={filterCountry}\n          setSelectedOptions={setFilterCountry}\n        />\n      </div>\n      <div className=\"filter-section\">\n        <StaticFilterOptions\n          title=\"Level 1 Name\"\n          options={level1Options}\n          selectedOptions={level1Filter}\n          setSelectedOptions={setLevel1Filter}\n        />\n      </div>\n      <div className=\"filter-section\">\n        <StaticFilterOptions\n          title=\"Level 2 Name\"\n          options={level2Options}\n          selectedOptions={level2Filter}\n          setSelectedOptions={setLevel2Filter}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Mapfilter;","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport MapView from './components/MapView';\nimport Table from './components/Table';\nimport Timebar from './components/Timebar';\nimport Sidebar from './components/Sidebar';\nimport Draft from './components/Draft';\nimport Mapfilter from './components/Mapfilter';\nimport DraftRow from './components/DraftRow';\n\nexport default function App() {\n    const [countryData, setCountryData] = useState(null);\n    const [level1Data, setLevel1Data] = useState(null);\n    const [level2Data, setLevel2Data] = useState(null);//for diff layers\n    const [selectedYear, setSelectedYear] = useState(2023);\n    const [selectedMonth, setSelectedMonth] = useState(3);\n    const [hoveredRegion, setHoveredRegion] = useState(null);\n    const [filteredData, setFilteredData] = useState({\n      filteredCountryData: [],\n      filteredLevel1Data: [],\n      filteredLevel2Data: [],\n    });\n    const handleFilteredDataChange = (filteredData) => {\n      setFilteredData(filteredData);\n    };\n\n    const handleYearChange = (year) => {\n      setSelectedYear(year);\n    };\n    const handleMonthChange = (month) => {\n      setSelectedMonth(month);\n    };\n    \n    const handleRegionChange= (region) => { \n      setHoveredRegion(region);\n      \n    };\n    \n  \n\n    useEffect(() => { //la data de draft si cambia porque esta dentro de UseEffect\n        async function fetchData() {\n          try {\n            const responseCountry = await axios.get('/data/output_country.geojson');\n            setCountryData(responseCountry.data);\n    \n            const responseLevel1 = await axios.get('/data/output_level1.geojson');\n            setLevel1Data(responseLevel1.data);\n    \n            const responseLevel2 = await axios.get('/data/output_level2.geojson');\n            setLevel2Data(responseLevel2.data);\n              console.log(responseLevel1,responseLevel2,'response levels');\n\n          } catch (error) {\n            console.error('Error fetching data:', error);\n          }\n        }\n    \n        fetchData();\n      }, []);\n\n    \n\n  return (\n    <div>\n      <MapView regionInfo={hoveredRegion} onChangeYear={handleYearChange} onChangeRegion={handleRegionChange} selectedYear={selectedYear} onChangeMonth={handleMonthChange} selectedMonth={selectedMonth}/>\n      \n      <Timebar onChangeYear={handleYearChange} selectedYear={selectedYear} onChangeMonth={handleMonthChange} selectedMonth={selectedMonth} />\n      <Sidebar countryData={countryData} level1Data={level1Data} level2Data={level2Data} regionInfo={hoveredRegion} onChangeYear={handleYearChange} selectedYear={selectedYear} onChangeMonth={handleMonthChange} selectedMonth={selectedMonth} /> \n      <Mapfilter handleFilteredDataChange={handleFilteredDataChange}/>\n      <div><Draft countryData={countryData} level1Data={level1Data} level2Data={level2Data} onChangeYear={handleYearChange} selectedYear={selectedYear} onChangeMonth={handleMonthChange} selectedMonth={selectedMonth}/></div>\n\n    \n      \n\n    </div>\n\n\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}